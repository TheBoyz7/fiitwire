<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FootWire | Premier League Overview</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/leagues.css">
  <link rel="stylesheet" href="css/leaguesstats.css">
</head>
<body>

  <!-- Site Header -->
  <header class="site-header">
    <div class="container">
      <h1>FootWire ⚽ Premier League</h1>
      <nav class="main-nav">
        <ul>
          <li><a href="index.php">Home</a></li>
          <li><a href="news.php">News</a></li>
          <li><a href="league.html">Leagues</a></li>
          <li><a href="team.html">Teams</a></li>
          <li><a href="live.html">Live Scores</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- League Banner -->
  <section class="league-banner">
    <div class="container">
      <img src="images/premier-league-logo-5F922E3/premier-league-logo.png" alt="Premier League Logo" class="league-logo">
      <div class="league-info">
        <h2>Premier League</h2>
        <p class="league-description">England’s top-flight competition featuring 20 clubs battling for glory.</p>
      </div>
    </div>
  </section>

  <!-- Primary Tabs -->
  <nav class="league-tabs container">
    <button class="tab-btn active" data-tab="overview">Overview</button>
    <button class="tab-btn" data-tab="standings">Standings</button>
    <button class="tab-btn" data-tab="fixtures">Fixtures</button>
    <button class="tab-btn" data-tab="statistics">Statistics</button>
    <!-- <button class="tab-btn" data-tab="news">News</button> -->
  </nav>

  <!-- Tab Contents -->
  <main class="league-content container">

    <!-- Overview -->
    <section id="overview" class="tab-content active">
     <div class="overview-widgets">
  <div class="overview-video">
    <h4>Weekly League News</h4>
    <div class="video-container"><!-- iframe injected here --></div>
  </div>

  <div class="overview-fixtures">
    <br>
    <h4>Upcoming Fixtures</h4>
    <ul class="fixtures-preview">
      <!-- JS will insert <li>Team A vs Team B — Time</li> here -->
     
       
    </ul>
    <button class="btn view-all-fixtures">View All Fixtures</button>
  </div>
</div>

<div class="league-overview">
  <div class="overview-team-of-week">
    <h4>Team of the Week</h4>
    <div class="pitch-container">
      <!-- Player cards will be injected here -->
    </div>
  </div>
  <div class="league-table-container">
    <!-- League Table content will be injected here -->
  </div>
</div>


    </section>

    <!-- Standings -->
    <section id="standings" class="tab-content">
      <h3>Current Standings</h3>
       <div id="error"></div>
  <table>
    <thead>
      <tr>
        <th>Position</th>
        <th>Team</th>
        <th>Points</th>
      </tr>
    </thead>
    <tbody id="standings-body">
      <!-- Data rows will go here -->
    </tbody>
  </table>

    </section>

    <!-- Fixtures -->
    <section id="fixtures" class="tab-content">
      <h3>Upcoming Fixtures </h3>
      <div class="fixtures-list">
        <!-- Fixture cards go here -->

        <p id="no-fixtures" style="display:none; color:#facc15;">No fixtures found for this league in the selected date range.</p>

      </div>
    </section>
    


    <!-- Statistics -->
  <section id="statistics" class="tab-content">
  <h3>Statistics123</h3>

  <div id="stats-sections">
    <section>
      <h2>Top Scorers</h2>
      <ul id="top-goals"></ul>
    </section>

    <section>
      <h2>Top Assists</h2>
      <ul id="top-assists"></ul>
    </section>

    <section>
      <h2>Red Cards</h2>
      <ul id="top-reds"></ul>
    </section>

    <section>
      <h2>Yellow Cards</h2>
      <ul id="top-yellows"></ul>
    </section>

    <section>
      <h2>Most Goals (Team)</h2>
      <ul id="team-goals"></ul>
    </section>

    <section>
      <h2>Most Clean Sheets (Team)</h2>
      <ul id="team-cleansheets"></ul>
    </section>
  </div>
</section>



    <!-- News -->
    <section id="news" class="tab-content">
      <h3>Latest League News</h3>
      <div class="news-grid">
        <!-- News cards here -->
      </div>
      <button class="view-more-news">View More News</button>
    </section>


    
  </main>
<!-- ⚫ FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 FootWire. All rights reserved.</p>
      <ul class="footer-links">
        <li><a href="">Privacy</a></li>
        <li><a href="">Terms</a></li>
        <li><a href="">Contact</a></li>
      </ul>
      <ul class="social-icons">
        <li><a href=""><img src="icons/x.svg" alt="Twitter/X"></a></li>
        <li><a href=""><img src="icons/instagram.svg" alt="Instagram"></a></li>
        <li><a href=""><img src="icons/youtube.svg" alt="YouTube"></a></li>
      </ul>
    </div>
  </footer>
  <script>
  // Europe’s Top 5 Leagues Data
const leagues = [
  {
    id: 1,
    name: 'Premier League',
    logo: 'images/premier-league-logo-5F922E3/premier-league-logo.png',
    description: 'England’s top-flight competition featuring 20 clubs battling for glory.',
     teamOfWeek: [
      { name: 'Alisson', position: 'GK', rating: 7.8, img: 'images/players/alisson.png' },
      { name: 'Trent Alexander-Arnold', position: 'RB', rating: 8.2, img: 'images/players/trent.png' },
      { name: 'Virgil van Dijk', position: 'CB', rating: 8.5, img: 'images/players/vandijk.png' },
      { name: 'Saliba', position: 'CB', rating: 8.0, img: 'images/players/rudiger.png' },
      { name: 'Luke Shaw', position: 'LB', rating: 8.1, img: 'images/players/cancelo.png' },
      { name: 'Kevin De Bruyne', position: 'CM', rating: 8.7, img: 'images/players/debruyne.png' },
      { name: 'Bruno Fernandes', position: 'CM', rating: 8.3, img: 'images/players/fernandes.png' },
      { name: 'Maddison', position: 'CM', rating: 8.4, img: 'images/players/modric.png' },
      { name: 'Mohamed Salah', position: 'RW', rating: 8.6, img: 'images/players/salah.png' },
      { name: 'Erling Haaland', position: 'ST', rating: 8.9, img: 'images/players/haaland.png' },
      { name: 'Bukayo Saka', position: 'LW', rating: 8.2, img: 'images/players/saka.png' }
    ],
    seasonId:'23690',
    league_id:'501',
  },
  {
    id: 2,
    name: 'La Liga',
    logo: 'images/La_Liga-2023-brandlogos.net-OBnr7x/la_liga-logo_brandlogos.net_e6gnt.png',
    description: 'Spain’s premier professional football division with fierce rivalries.',
    teamOfWeek: [
      { name: 'Jan Oblak', position: 'GK', rating: 8.0, img: 'images/players/oblak.png' },
      { name: 'Dani Carvajal', position: 'RB', rating: 8.1, img: 'images/players/carvajal.png' },
      { name: 'Éder Militão', position: 'CB', rating: 8.3, img: 'images/players/militao.png' },
      { name: 'Asensio', position: 'CB', rating: 8.0, img: 'images/players/ramos.png' },
      { name: 'Jordi Alba', position: 'LB', rating: 8.2, img: 'images/players/alba.png' },
      { name: 'Jude Bellingham', position: 'CM', rating: 8.4, img: 'images/players/kroos.png' },
      { name: 'Frenkie de Jong', position: 'CM', rating: 8.3, img: 'images/players/dejong.png' },
      { name: 'Pedri', position: 'CM', rating: 8.1, img: 'images/players/pedri.png' },
      { name: 'Mbappe', position: 'ST', rating: 8.5, img: 'images/players/benzema.png' },
      { name: 'Yamal', position: 'LW', rating: 8.0, img: 'images/players/fati.png' },
      { name: 'Vinícius Júnior', position: 'RW', rating: 8.2, img: 'images/players/vini.png' }
    ],
     seasonId:'23584',
     league_id:'271',
  },
  {
    id: 3,
    name: 'Serie A',
    logo: 'images/serie-a-logo.png',
    description: 'Italy’s most prestigious football league, home to legendary clubs.',
    seasonId:'23690',
    league_id:'501',
  },
  {
    id: 4,
    name: 'Bundesliga',
    logo: 'images/bundesliga-logo.png',
    description: 'Germany’s top professional football league known for passionate fans.',
     seasonId:'23584',
     league_id:'271',
  },
  {
    id: 5,
    name: 'Ligue 1',
    logo: 'images/ligue-1-logo.png',
    description: 'France’s elite football division showcasing world-class talent.',
     seasonId:'23584',
     league_id:'271',
  }
];

// Get league ID from URL param (as number string)
const urlParams = new URLSearchParams(window.location.search);
const leagueNumId = urlParams.get('id');

// Convert to number and find corresponding league by array index (subtract 1 since arrays are 0-based)
const selectedLeague = leagues[leagueNumId - 1] || leagues[0]; // fallback to first (Premier League)

// If found, update page content dynamically
if (selectedLeague) {
  document.title = `FootWire | ${selectedLeague.name} Overview`;
  document.querySelector('.site-header h1').textContent = `FootWire ⚽ ${selectedLeague.name}`;
  document.querySelector('.league-logo').src = selectedLeague.logo;
  document.querySelector('.league-logo').alt = `${selectedLeague.name} Logo`;
  document.querySelector('.league-info h2').textContent = selectedLeague.name;
  document.querySelector('.league-description').textContent = selectedLeague.description;
}

// MAIN TAB SWITCHING
const tabButtons = document.querySelectorAll('.tab-btn');
const tabContents = document.querySelectorAll('.tab-content');

tabButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    tabButtons.forEach(b => b.classList.remove('active'));
    tabContents.forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
    btn.scrollIntoView({ behavior: 'smooth', inline: 'center' });
  });
});

// SUB-TAB SWITCHING (inside Statistics)
const subTabButtons = document.querySelectorAll('.sub-tab');
const subTabContents = document.querySelectorAll('.sub-tab-content');

subTabButtons.forEach(st => {
  st.addEventListener('click', () => {
    subTabButtons.forEach(b => b.classList.remove('active'));
    subTabContents.forEach(c => c.classList.remove('active'));
    st.classList.add('active');
    document.getElementById(st.dataset.subtab).classList.add('active');
  });
});

// VIEW MORE / VIEW LESS TOGGLE FOR STAT LISTS
const viewMoreButtons = document.querySelectorAll('.view-more');

viewMoreButtons.forEach(button => {
  button.addEventListener('click', () => {
    const targetList = document.getElementById(button.dataset.target);
    const isHidden = targetList.classList.toggle('hidden');
    button.textContent = isHidden ? 'View More' : 'View Less';
    if (!isHidden) {
      targetList.scrollIntoView({ behavior: 'smooth' });
    }
  });
});

// video 
const weeklyNewsVideos = {
  1: 'https://www.youtube.com/embed/https://youtu.be/XYoMhLSd3Ww?si=e_AmEjPWuONVtwQd',
  2: 'https://www.youtube.com/embed/https://youtu.be/dz8uxFVRgrA?si=WouOZ-OPiPOMAH_k',
  // …other leagues…
};

const overviewVideoContainer = document.querySelector('#overview .video-container');
const leagueKey = selectedLeague.id; // from our league.js code above
const videoURL = weeklyNewsVideos[leagueKey] || weeklyNewsVideos['premier-league'];

overviewVideoContainer.innerHTML = `
  <iframe
    src="${videoURL}"
    frameborder="0"
    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
  ></iframe>
`;

// fixtures
const fixturesPreview = document.querySelector('.fixtures-preview');
fixturesPreview.innerHTML = '';

// Get the current league_id from the global selectedLeague object
const leagueId = selectedLeague.league_id;

const startDate = '2025-07-01';
const endDate = '2025-09-30';

fetch(`http://localhost:3000/api/fixtures?startDate=${startDate}&endDate=${endDate}`)
  .then(res => res.json())
  .then(fixtures => {
    const now = new Date();

    const filtered = fixtures
      .filter(f => f.league?.id == leagueId)
      .filter(f => new Date(f.starting_at) > now); // Exclude past or ongoing fixtures

    const latest3 = filtered.slice(0, 3); // Still show only top 3 upcoming

    latest3.forEach(fx => {
      const participants = fx.participants || [];
      const home = participants.find(p => p.meta?.location === 'home') || participants[0];
      const away = participants.find(p => p.meta?.location === 'away') || participants[1];

      const homeName = home?.name || 'TBD';
      const awayName = away?.name || 'TBD';
      const homeLogo = home?.image_path || '';
      const awayLogo = away?.image_path || '';
      const kickoff = new Date(fx.starting_at).toLocaleString([], {  
        day: 'numeric', 
        month: 'short', 
        hour: '2-digit', 
        minute: '2-digit' 
      });

      const a = document.createElement('a');
      a.href = `match.html?id=${fx.id}`;
      a.className = 'fixture-item';

      a.innerHTML = `
        <img src="${homeLogo}" alt="${homeName} logo" class="fixture-logo">
        <span class="fixture-text">${homeName} vs ${awayName} — ${kickoff}</span>
        <img src="${awayLogo}" alt="${awayName} logo" class="fixture-logo">
      `;

      fixturesPreview.appendChild(a);
    });

    if (latest3.length === 0) {
      fixturesPreview.innerHTML = '<p style="color:#facc15;">No upcoming fixtures available.</p>';
    }
  })
  .catch(err => {
    console.error('Error fetching fixtures preview:', err);
    fixturesPreview.innerHTML = '<p style="color:red;">Failed to load fixtures preview.</p>';
  });


// --- Team of the Week ---


// position mapping
const formationPositions = {
  GK: { top: 90, left: 50 },
  LB: { top: 70, left: 15 },
  CB: [
    { top: 70, left: 40 },
    { top: 70, left: 60 }
  ],
  RB: { top: 70, left: 85 },
  CM: [
    { top: 50, left: 25 },
    { top: 50, left: 50 },
    { top: 50, left: 75 }
  ],
  LW: { top: 30, left: 20 },
  ST: { top: 30, left: 50 },
  RW: { top: 30, left: 80 }
};



const pitchContainer = document.querySelector('.pitch-container');
const positionCounters = {}; // To handle multiple players in the same position

selectedLeague.teamOfWeek.forEach(player => {
  const pos = player.position;
  let coords;

  if (Array.isArray(formationPositions[pos])) {
    // Initialize counter if not present
    if (!positionCounters[pos]) positionCounters[pos] = 0;
    // Assign coordinates based on the counter
    coords = formationPositions[pos][positionCounters[pos]];
    positionCounters[pos]++;
  } else {
    coords = formationPositions[pos];
  }

  if (!coords) return; // Skip if position is undefined

  // Create player card element
  const playerCard = document.createElement('a');
  playerCard.href = `player.html?id=${encodeURIComponent(player.name.toLowerCase().replace(/\s+/g, '-'))}`;
  playerCard.className = 'player-card';
  playerCard.style.top = `${coords.top}%`;
  playerCard.style.left = `${coords.left}%`;

  playerCard.innerHTML = `
    <img src="${player.img}" alt="${player.name}" class="player-img">
    <span class="player-rating">${player.rating.toFixed(1)}</span>
  `;

  pitchContainer.appendChild(playerCard);
});



//table
// Function to extract the 'id' parameter from the URL
function getLeagueIdFromURL() {
  const params = new URLSearchParams(window.location.search);
  const idParam = params.get('id');
  return idParam ? parseInt(idParam, 10) : null;
}

function renderLeagueTable(leaguesId) {
  const league = leagues.find(l => l.id === leaguesId);
  if (!league || !league.seasonId) return;

  const seasonId = league.seasonId;
  const tableContainer = document.querySelector('.league-table-container');
  tableContainer.innerHTML = `<p>Loading standings for ${league.name}...</p>`;

  fetch(`http://localhost:3000/api/standings/${seasonId}`)
    .then(response => {
      if (!response.ok) throw new Error('Failed to fetch standings');
      return response.json();
    })
    .then(data => {
      if (!data.data || data.data.length === 0) {
        tableContainer.innerHTML = '<p>No standings data found.</p>';
        return;
      }

      // Limit to top half of table
      const standings = data.data.slice(0, Math.ceil(data.data.length / 2));

      const tableHTML = `
        <h2>${league.name} Standings</h2>
        <table>
          <thead>
            <tr>
              <th>Pos</th>
              <th>Team</th>
              <th>Pts</th>
            </tr>
          </thead>
          <tbody>
            ${standings.map(team => `
              <tr>
                <td>${team.position}</td>
                <td>
                  <img src="${team.participant.image_path}" alt="${team.participant.name}" class="team-logo" />
                  ${team.participant.name}
                </td>
                <td>${team.points}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;

      tableContainer.innerHTML = tableHTML;
    })
    .catch(err => {
      console.error('Error:', err);
      tableContainer.innerHTML = `<p>Error loading standings.</p>`;
    });
}

const leaguesId = parseInt(urlParams.get('id'));
renderLeagueTable(leaguesId);


// testing api
//standings
if (!leagueNumId) {
  document.getElementById('error').textContent = 'No league ID provided in URL.';
} else {
  const selectedLeague = leagues.find(l => l.id.toString() === leagueNumId);

  if (!selectedLeague) {
    document.getElementById('error').textContent = 'League not found.';
  } else {
    const seasonId = selectedLeague.seasonId;

    fetch(`http://localhost:3000/api/standings/${seasonId}`)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        const standingsBody = document.getElementById('standings-body');
        standingsBody.innerHTML = ''; 

        if (!data.data || data.data.length === 0) {
          document.getElementById('error').textContent = 'No standings data found.';
          return;
        }

        data.data.forEach(team => {
          const row = document.createElement('tr');

          const positionCell = document.createElement('td');
          positionCell.textContent = team.position;
          row.appendChild(positionCell);

          const teamCell = document.createElement('td');
          const teamImg = document.createElement('img');
          teamImg.src = team.participant.image_path;
          teamImg.alt = team.participant.name;
          teamImg.className = 'team-logo';
          teamCell.appendChild(teamImg);
          teamCell.appendChild(document.createTextNode(' ' + team.participant.name));
          row.appendChild(teamCell);

          const pointsCell = document.createElement('td');
          pointsCell.textContent = team.points;
          row.appendChild(pointsCell);

          standingsBody.appendChild(row);
        });
      })
      .catch(error => {
        console.error('Error fetching standings:', error);
        document.getElementById('error').textContent = 'Failed to load standings data.';
      });
  }
}

// fixtures api

document.addEventListener("DOMContentLoaded", () => {
  const fixturesTab = document.querySelector('#fixtures');

  if (!fixturesTab) return;

  // Only load fixtures when the tab becomes visible
  const observer = new MutationObserver(() => {
    if (!fixturesTab.classList.contains('active')) return;
    observer.disconnect(); // Run only once
    fetchFixtures();
  });

  observer.observe(fixturesTab, { attributes: true, attributeFilter: ['class'] });

  // Fallback: manual trigger if you know tab is already active
  if (fixturesTab.classList.contains('active')) {
    fetchFixtures();
  }
});

async function fetchFixtures() {
  const startDate = '2025-07-01';
  const endDate = '2025-09-30';

  const list = document.querySelector('.fixtures-list');
  const noFixturesMsg = document.getElementById('no-fixtures');
  if (!list) return;

  list.innerHTML = '';
  noFixturesMsg.style.display = 'none';

  const urlParams = new URLSearchParams(window.location.search);
  const localLeagueId = urlParams.get('id');

  if (!localLeagueId) {
    list.innerHTML = '<p style="color:red;">League ID not found in URL.</p>';
    return;
  }

  const league = leagues.find(l => l.id == localLeagueId);
  if (!league) {
    list.innerHTML = '<p style="color:red;">League not found.</p>';
    return;
  }

  const leagueId = league.league_id;

  try {
    const response = await fetch(`http://localhost:3000/api/fixtures?startDate=${startDate}&endDate=${endDate}`);
    const fixtures = await response.json();

    const leagueFixtures = fixtures.filter(f => f.league?.id == leagueId);

    if (!leagueFixtures.length) {
      noFixturesMsg.style.display = 'block';
      return;
    }

    leagueFixtures.forEach(fixture => {
      const participants = fixture.participants || [];
      let home = participants.find(p => p.meta?.location === 'home') || participants[0];
      let away = participants.find(p => p.meta?.location === 'away') || participants[1];

      const homeName = home?.name || 'TBD';
      const awayName = away?.name || 'TBD';
      const homeLogo = home?.image_path ? `<img src="${home.image_path}" alt="${homeName}" height="30" style="border-radius:50%">` : '';
      const awayLogo = away?.image_path ? `<img src="${away.image_path}" alt="${awayName}" height="30" style="border-radius:50%">` : '';

      const kickoff = new Date(fixture.starting_at).toLocaleString();
      const scores = fixture.scores?.filter(s => s.description === 'CURRENT') || [];
      const homeScore = scores.find(s => s.participant_id === home?.id)?.score?.goals ?? '-';
      const awayScore = scores.find(s => s.participant_id === away?.id)?.score?.goals ?? '-';

      const a = document.createElement('a');
      a.href = `match.html?id=${fixture.id}`;
      a.style = 'text-decoration: none; color: inherit;';

      const div = document.createElement('div');
      div.className = 'fixture-card';
      div.style = `
        background:#222;
        padding:15px;
        margin-bottom:10px;
        border-radius:8px;
        color:#facc15;
        font-family:'Inter',sans-serif;
        box-shadow:0 2px 4px rgba(255,255,255,0.05);
      `;

      div.innerHTML = `
        <div style="display:flex;align-items:center;justify-content:space-between;">
          <div style="display:flex;align-items:center;gap:10px;">
            ${homeLogo} <strong>${homeName}</strong>
          </div>
          <div style="font-weight:bold; font-size:18px;">${homeScore} - ${awayScore}</div>
          <div style="display:flex;align-items:center;gap:10px;">
            <strong>${awayName}</strong> ${awayLogo}
          </div>
        </div>
        <em style="font-size:14px;color:#aaa;">${kickoff}</em>
      `;

      a.appendChild(div);
      list.appendChild(a);
    });
  } catch (error) {
    console.error('Error fetching fixtures:', error);
    list.innerHTML = '<p style="color:red;">Failed to fetch fixtures.</p>';
  }
}

//stats
const baseURL = 'http://localhost:3000/api';

if (!selectedLeague || !selectedLeague.seasonId) {
  console.error('❌ League not found or season ID missing.');
} else {
  const seasonId = selectedLeague.seasonId;

  const fetchStat = async (endpoint) => {
    try {
      const res = await fetch(`${baseURL}${endpoint}`);
      const data = await res.json();
      return Array.isArray(data) ? data : data.data || [];
    } catch (err) {
      console.error('❌ Error fetching:', endpoint, err);
      return [];
    }
  };

  const renderPlayerList = (selector, items, valueLabel = '') => {
    const list = document.querySelector(selector);
    if (!list) return;

    list.innerHTML = '';
    items.forEach(item => {
      const playerName = item.player?.display_name || 'Unknown';
      const playerImg = item.player?.image_path || 'https://via.placeholder.com/32';
      const teamName = item.participant?.name || 'Unknown Team';
      const teamImg = item.participant?.image_path || 'https://via.placeholder.com/32';
      const value = item.total ?? 0;

      const li = document.createElement('li');
      li.innerHTML = `
        <div class="info">
          <img src="${playerImg}" alt="${playerName}">
          <strong>${playerName}</strong>
          <small>(${teamName})</small>
          <img src="${teamImg}" alt="${teamName}" style="width:24px;height:24px;">
        </div>
        <span><strong>${value}</strong> ${valueLabel}</span>
      `;
      list.appendChild(li);
    });
  };

  const renderTeamList = (selector, teams, label = '') => {
    const list = document.querySelector(selector);
    if (!list) return;

    list.innerHTML = '';
    teams
      .sort((a, b) => b.total - a.total)
      .slice(0, 5)
      .forEach(team => {
        const li = document.createElement('li');
        li.innerHTML = `
          <div class="info">
            <img src="${team.image}" alt="${team.name}">
            <strong>${team.name}</strong>
          </div>
          <span><strong>${team.total}</strong> ${label}</span>
        `;
        list.appendChild(li);
      });
  };

  const loadAllStats = async () => {
    const [
      topScorers,
      topAssisters,
      redCards,
      yellowCards,
      teamGoals,
      teamCleansheets
    ] = await Promise.all([
      fetchStat(`/topscorers/${seasonId}?filters=seasonTopscorerTypes:208`),
      fetchStat(`/topassists/${seasonId}`),
      fetchStat(`/redcards/${seasonId}`),
      fetchStat(`/yellowcards/${seasonId}`),
      fetchStat(`/teamstats/goals/${seasonId}`),
      fetchStat(`/teamstats/cleansheets/${seasonId}`)
    ]);

    renderPlayerList('#top-goals', topScorers.slice(0, 5), 'goals');
    renderPlayerList('#top-assists', topAssisters.slice(0, 5), 'assists');
    renderPlayerList('#top-reds', redCards.slice(0, 5), 'reds');
    renderPlayerList('#top-yellows', yellowCards.slice(0, 5), 'yellows');
    renderTeamList('#team-goals', teamGoals, 'goals');
    renderTeamList('#team-cleansheets', teamCleansheets, 'clean sheets');
  };

  document.querySelectorAll('ul').forEach(ul => {
  if (ul.children.length > 5) {
    const btn = document.createElement('button');
    btn.textContent = 'View More';
    btn.className = 'view-more-btn';

    btn.addEventListener('click', () => {
      ul.classList.toggle('expanded');
      btn.textContent = ul.classList.contains('expanded') ? 'View Less' : 'View More';
    });

    ul.parentElement.appendChild(btn);
  }
});


  loadAllStats();

  document.querySelectorAll('ul').forEach(ul => {
  if (ul.children.length > 5) {
    const btn = document.createElement('button');
    btn.textContent = 'View More';
    btn.className = 'view-more-btn';

    btn.addEventListener('click', () => {
      ul.classList.toggle('expanded');
      btn.textContent = ul.classList.contains('expanded') ? 'View Less' : 'View More';
    });

    ul.parentElement.appendChild(btn);
  }
});

}


  </script>

  <script>
    const sections = document.querySelectorAll('#stats-sections section');
sections.forEach((sec, i) => {
  sec.style.opacity = 0;
  sec.style.transform = 'translateY(30px)';
  sec.style.transition = `opacity 0.6s ease ${i * 0.1}s, transform 0.6s ease ${i * 0.1}s`;

  setTimeout(() => {
    sec.style.opacity = 1;
    sec.style.transform = 'translateY(0)';
  }, 300);
});

  </script>
</body>
</html>
